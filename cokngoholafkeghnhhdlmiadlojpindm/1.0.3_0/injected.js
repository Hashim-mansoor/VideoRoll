(()=>{function e(e,t,n){let{videoWidth:o,videoHeight:r,offsetWidth:i,offsetHeight:s}=e;const l=90===n||270===n;null==o&&(o=t.offsetWidth,r=t.offsetHeight);const c=o>r,d=i>s;if(l&&!c&&d){const e=r/o;return Number.isNaN(e)?1:e}return(l||c||!d)&&l&&c&&d?s/i:1}function t(t,n,r,i){for(const s of n){const n=Array.isArray(s);r=i.querySelector(n?s[0]:s);const l=n?document.querySelector(s[1]):r;if(r&&r){return o(t,e(r,l,t)),r.classList.add("video-roll-transition"),r.classList.add("video-roll-deg-scale"),void r.setAttribute("data-roll","true")}}}function n(e,n){let o=null;r(),t(e,n,o,document);{const r=function(){const e=document.querySelector("iframe");return e?e.contentDocument:null}();if(r)try{t(e,n,o,r)}catch(e){console.warn(`rotate video failed: ${e}`)}}}function o(e,t){document.getElementById("video-roll-deg-scale").innerHTML=`.video-roll-deg-scale { transform: rotate(${e}deg) scale(${t}) !important; }`}function r(){const e=function(){const e=document.getElementById("video-roll-deg-scale"),t=document.getElementById("video-roll-transition");return e&&t}();if(e)return;const t=document.createElement("style"),n=document.createElement("style");t.innerHTML="\n        .video-roll-deg-scale {}\n    ",n.innerHTML=".video-roll-transition {\n            transition: all 0.5s ease !important;\n        }",t.setAttribute("id","video-roll-deg-scale"),n.setAttribute("id","video-roll-transition"),t.setAttribute("type","text/css"),n.setAttribute("type","text/css");const o=document.getElementsByTagName("head")[0];o.appendChild(t),o.appendChild(n)}chrome.runtime.onMessage.addListener(((e,t,o)=>{const{webInfo:i,deg:s,style:l}=e;l?r():n(s,i.videoSelector),o("rotate success")}))})();